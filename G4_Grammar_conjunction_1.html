<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Look for 8 Conjunctions</title>

<style>
body {
  font-family: "Hiragino Maru Gothic ProN","Hiragino Maru Gothic",Arial,sans-serif;
  background:#f4f8ff;
  padding:20px;
  text-align:center;
}

h1 {
  font-size:44px;
  margin-bottom:10px;
}

.subtitle {
  font-size:26px;
  margin-bottom:20px;
}

button {
  font-size:26px;
  padding:12px 22px;
  margin-bottom:25px;
  border-radius:14px;
  border:none;
  cursor:pointer;
  background:#ff9800;
  color:white;
}

.grid {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap:18px;
  max-width:700px;
  margin:0 auto;
}

.card {
  background:white;
  padding:20px;
  font-size:34px;
  border-radius:16px;
  box-shadow:0 4px 6px rgba(0,0,0,0.15);
  cursor:pointer;
  user-select:none;
  transition:0.2s;
}

.card.correct {
  background:#c8f7c5;
  color:#1b5e20;
}

.card.wrong {
  background:#ffe0e0;
}

.meaning {
  font-size:20px;
  margin-top:8px;
}

.counter {
  font-size:30px;
  margin-top:20px;
}

canvas {
  position:fixed;
  top:0;
  left:0;
  pointer-events:none;
}
</style>
</head>

<body>

<h1>Look for 8 Conjunctions!</h1>
<div class="subtitle">Ôºò„Å§„ÅÆÊé•Á∂öË©û„Çí„Åï„Åå„Åù„ÅÜÔºÅ</div>

<button id="shuffleBtn">üîÄ „Ç∑„É£„ÉÉ„Éï„É´</button>

<div class="grid" id="grid"></div>

<div class="counter" id="counter">0 / 8 found</div>

<canvas id="confetti"></canvas>

<script>

// ===== Êé•Á∂öË©û =====
const conjunctions = [
  "when","if","because","before","after","but","so","and"
];

// ===== ÂíåË®≥ =====
const meanings = {
  when: "„Äú„Åô„Çã„Å®„Åç",
  if: "„ÇÇ„Åó„Äú„Å™„Çâ",
  because: "„Å™„Åú„Å™„Çâ",
  before: "„Äú„Åô„ÇãÂâç„Å´",
  after: "„Äú„Åó„Åü„ÅÇ„Å®„Åß",
  but: "„Åó„Åã„Åó",
  so: "„Å†„Åã„Çâ",
  and: "„Åù„Åó„Å¶"
};

// ===== Ë°®Á§∫„Åô„ÇãÂçòË™û =====
const words = [
  "when","if","because","before","after","but","so","and",
  "he","she","they","play","run","happy",
  "in","on","under","blue"
];

const shuffle = arr => [...arr].sort(()=>Math.random()-0.5);

const grid = document.getElementById("grid");
const counter = document.getElementById("counter");

let found = 0;

function buildGame(){
  grid.innerHTML = "";
  found = 0;
  counter.textContent = "0 / 8 found";

  shuffle(words).forEach(word=>{
    const div=document.createElement("div");
    div.className="card";
    div.textContent=word;

    div.onclick=()=>{

      if(div.classList.contains("correct")) return;

      if(conjunctions.includes(word)){
        div.classList.add("correct");

        div.innerHTML = `
          ${word}
          <div class="meaning">${meanings[word]}</div>
        `;

        found++;
        counter.textContent = `${found} / 8 found`;

        if(found===8){
          startConfetti();
          setTimeout(stopConfetti,5000);
        }

      }else{
        div.classList.add("wrong");
        setTimeout(()=>div.classList.remove("wrong"),500);
      }
    };

    grid.appendChild(div);
  });
}

document.getElementById("shuffleBtn").onclick = buildGame;

buildGame();

// ===== Á¥ôÂêπÈõ™ =====
const canvas=document.getElementById("confetti");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;
let confetti=[],anim;

function startConfetti(){
  confetti=Array.from({length:180},()=>({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    r:Math.random()*6+4,
    d:Math.random()*5+2
  }));
  anim=requestAnimationFrame(draw);
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  confetti.forEach(c=>{
    ctx.beginPath();
    ctx.arc(c.x,c.y,c.r,0,Math.PI*2);
    ctx.fillStyle=`hsl(${Math.random()*360},100%,60%)`;
    ctx.fill();
    c.y+=c.d;
    if(c.y>canvas.height) c.y=0;
  });
  anim=requestAnimationFrame(draw);
}

function stopConfetti(){
  cancelAnimationFrame(anim);
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

</script>

</body>
</html>
